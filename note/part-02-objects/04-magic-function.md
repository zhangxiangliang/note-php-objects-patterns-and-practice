# 魔术方法

## 使用拦截器
* 可以`拦截`发送到未定义方法和属性的消息（重载、拦截器）
* __get($property)
* __set($property, $value)
* __isset($property)
* __unset($property)
* __call($method, $arg_array)
* 使用 `__call` 来进行委托，但是由于是动态生成的，所以对外界来说无法进行反射。

## 析构方法
* __destruct(), 在对象被从内存删除前被自动调用。
* 可用于操作数据库后，销毁对象前检查是否已保存数据，并进行相应操作。
* 使用魔术方法，相当于改变了PHP的规则，可能导致隐性代价。

## 使用 __clone() 复制对象
* 对对象使用 `=`，赋值的内容为 对象引用，可以使用 clone 关键字来赋值。
* 更为灵活的方法为，使用 __clone() 和 clone 来进行复制对象。
* 可以定制深复制或浅复制，注意浅复制所导致的意外。

## 定义对象的字符串值
* 实现 `__toString()` 方法，可以控制对象输出的字符串格式。
* 当将对象传递给 print 或者 echo 的时候会调用 `__toString()`。
* 对于日志和错误报告，`__toString()`非常有用，例如在 Exception 中总结错误信息。

## 回调、匿名函数和闭包
* 利用回调可以赋予他人，在你不知道的上下文中扩展你的代码的权利。
* 利用 `is_callable()` 来判断函数是否可执行，参数可以是 `function()`, `[Object, methods]`, `Object::create`。
* 利用 `call_user_func()` 来调用函数。
* 利用 闭包 的特性，可以用来共享同一个 函数上下文。
* 利用匿名函数来使得代码更加可读，替代 `create_function($name, $content)`。
